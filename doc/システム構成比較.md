# 診断アプリ システム構成比較

**Streamlit版 vs Next.js版**

---

## 📋 目次

1. [専門用語の解説](#専門用語の解説)
2. [当初の構成（Streamlit版）](#当初の構成streamlit版)
3. [課題と問題点](#課題と問題点)
4. [新しい構成（Next.js版）](#新しい構成nextjs版)
5. [変更によるメリット](#変更によるメリット)
6. [今後の展開](#今後の展開)
7. [カスタムドメイン設定（詳細手順）](#-カスタムドメイン設定詳細手順)

---

## 💡 専門用語の解説

**このページで使う用語を簡単に説明します**

**Python（パイソン）**
- プログラミング言語の一つ
- データ分析やAI開発でよく使われる
- 初心者にも学びやすい人気の言語

**Streamlit（ストリームリット）**
- Pythonで作ったプログラムを、簡単にWebアプリにできるツール
- **サーバー環境（Python実行環境）が必要**
- ユーザーが操作するたびに、サーバー側でPythonプログラムが実行される

**Next.js（ネクストジェイエス）**
- 現代的なホームページ作成技術
- スマホでサクサク動く
- Googleなど大企業も使用
- **静的ファイルとして動作するため、サーバー環境が不要**

**静的ホスティング vs サーバー実行環境の違い**

```
Streamlit（サーバー実行環境が必要）
┌─────────────────────────────┐
│ 必要な環境:                  │
│  - Python実行環境            │
│  - メモリ（512MB〜）         │
│  - CPU（常時稼働）           │
│  - Streamlitライブラリ       │
│  → コンピューターが必要！    │
└─────────────────────────────┘

Next.js（静的ホスティング）
┌─────────────────────────────┐
│ 必要な環境:                  │
│  - HTML/JavaScript ファイル  │
│  - ファイル置き場だけ        │
│  → 処理はユーザーのスマホで！ │
└─────────────────────────────┘
```

**GitHub Pages（ギットハブ ページズ）**
- Microsoftが提供する無料のホームページサービス
- **静的ファイルのみ配信可能**（Pythonは実行できない）
- 世界中に高速配信ネットワークを持つ
- メンテナンス不要

**クライアントサイド**
- スマホやパソコンのブラウザで直接動く
- サーバーとの通信が不要
- だから速い！

**デプロイ**
- アプリを公開すること
- Git Pushするだけで自動的に公開される

---

## 🎯 当初の構成（Streamlit版）

### システム構成図

```
┌─────────────────┐
│                 │
│     ユーザー     │
│  (スマホ/PC)    │
│                 │
└────────┬────────┘
         │
         │ アクセス
         ▼
┌─────────────────┐
│                 │
│  レンタルサーバー │ ← 💰 月額費用が発生
│  (常時稼働必要)  │
│                 │
└────────┬────────┘
         │
         │ Pythonアプリ起動
         ▼
┌─────────────────┐
│                 │
│ Streamlit アプリ │
│   診断アプリ    │
│                 │
└─────────────────┘
```

### 特徴

✅ **良い点**
- Pythonで開発しやすい
- データ分析ツールが豊富
- 開発スピードが速い

❌ **課題**
- **サーバーが常時稼働する必要がある**
- **月額料金が発生する**
  - 例1: Heroku（アメリカの有名サービス）: 月7ドル = 約1,000円
  - 例2: Render（新興サービス）: 月7ドル = 約1,000円
  - 例3: AWS Lightsail（Amazon）: 月5ドル〜 = 約700円〜
  - 例4: さくらのVPS（日本）: 月682円〜
  - **→ 実際は月1,000円程度で済むケースもある**
  - **→ ここでは安全を見て月3,000円で試算**
- サーバーダウンのリスク
- アクセスが集中すると遅くなる
- スマホでの操作が重い

---

## ⚠️ 課題と問題点

### 1. コストの問題

**主要なホスティングサービスの料金比較**

| サービス名 | 月額料金 | 年間費用 | 特徴 |
|-----------|---------|---------|------|
| Heroku | $7 = 約1,000円 | 約12,000円 | 有名・使いやすい |
| Render | $7 = 約1,000円 | 約12,000円 | 新しい・高速 |
| AWS Lightsail | $5〜 = 約700円〜 | 約8,400円〜 | 柔軟だが設定が複雑 |
| さくらのVPS | 682円〜 | 約8,200円〜 | 日本企業・安定 |

**→ 本資料では安全を見て月3,000円で試算していますが、実際は月1,000円程度でも運用可能です**
**ユーザーがアクセスしてから表示されるまでの流れ**

```
Streamlit版（サーバー経由）:

ユーザー → [2-3秒待つ] → サーバー → [処理] → ユーザーに表示
   ↓
ボタンクリック → [1-2秒待つ] → サーバー → [処理] → 次の画面
   ↓
また同じことの繰り返し...

合計: 毎回 1-3秒 の待ち時間が発生
```

**問題点**:
- ⏱️ 毎回サーバーと通信するため遅い（1-3秒かかる）
- 📶 Wi-Fi環境が必須（オフラインでは使えない）
- 🔄 サーバーのメンテナンスが必要（月1-2時間）
- 💻 サーバーが停止すると使えなくなる

---

## ✨ 新しい構成（Next.js版）

### システム構成図

```
┌─────────────────┐
│                 │
│     ユーザー     │
│  (スマホ/PC)    │
│                 │
└────────┬────────┘
         │
         │ アクセス
         ▼
┌─────────────────────────────┐
│                             │
│  GitHub Pages               │
│  (無料ホスティング)         │ ← 🎉 完全無料！
│                             │
│  ┌─────────────────────┐   │
│  │ Next.js アプリ      │   │
│  │ (静的ファイル)      │   │
│  │                     │   │
│  │ ブラウザで直接実行  │   │
│  └─────────────────────┘   │
│                             │
└─────────────────────────────┘
```

### 動作の仕組み

**Next.js版（ブラウザで直接実行）**

```
ユーザー → [0.5秒] → ファイルをダウンロード → スマホで実行開始
   ↓
ボタンクリック → [0.1秒以下] → すぐに次の画面
   ↓
サーバーとの通信が一切不要！

合計: 初回のみ 0.5秒、以降は 0.1秒以下
```

**ポイント**:
- ⚡ サーバー通信なし = 爆速（0.1秒以下）
- 📱 スマホ内で完結（サーバー不要）
- 🌐 一度読み込めばオフラインでも動く（今後対応予定）
- 💰 サーバー代が一切かからない

---

## 📊 技術的な変更点（シンプル版）

### アーキテクチャの違い

```
🔴 Streamlit版: サーバーサイド処理
┌──────────┐       ┌──────────┐
│          │       │          │
│ スマホ   │ ←──→ │ サーバー  │
│          │       │ (Python) │
│          │       │          │
└──────────┘       └──────────┘
   ↑ 毎回通信が発生 ↑

🟢 Next.js版: クライアントサイド処理
┌──────────────────┐
│                  │
│    スマホ        │
│  (JavaScript)    │
│                  │
│  全ての処理を    │
│  スマホ内で完結  │
│                  │
└──────────────────┘
   ↑ 通信不要 ↑
**作成者**: Coaching App Development Team
```

---

## 🎁 変更によるメリット

### 1. コスト削減（100%削減）

```
従来（Streamlit版）
月額: 1,000円〜3,000円
年間: 12,000円〜36,000円
  ↓
新方式（Next.js版）
月額: 0円
年間: 0円

💰 年間 12,000円〜36,000円 のコスト削減
```

### 2. 速度向上（5倍高速化）

```
Before（Streamlit版）
初回表示: 2-3秒
ボタン反応: 1-2秒
  ↓
After（Next.js版）
初回表示: 0.5秒
ボタン反応: 0.1秒以下

⚡ 体感速度が大幅に向上
```

### 3. メンテナンス削減

```
Before: 月1-2時間のサーバーメンテナンス
  ↓
After: メンテナンス不要（自動化）

🔧 運用負荷ゼロ
```

### 4. ユーザー体験の向上

```
Before（Streamlit版）
・毎回サーバーとの通信待ち
・Wi-Fi必須
・サーバー停止のリスク
  ↓
After（Next.js版）
・サクサク動く
・オフライン対応可能（今後）
・常に利用可能

📱 いつでもストレスなく使える
```

### 5. 将来の拡張性

```
同じプラットフォームで追加アプリを展開可能

/vak/                ← VAK診断
/communication_style/ ← コミュニケーションスタイル診断
/wine_vak/           ← ワイン × VAK診断（予定）
/personality/        ← 性格診断（今後）
/motivation/         ← モチベーション診断（今後）

💡 すべて追加費用なし
```

---

## 🌟 今後の展開計画

### 追加予定の機能

```
✅ 完了
・Next.js版の開発
・GitHub Pagesデプロイ
・スマホ最適化
・検索エンジンクロール拒否

📋 今後の候補
・PWA対応（オフラインでアプリのように使える）
・結果のPDFエクスポート
・SNSシェア機能
・カスタムドメイン対応
```

### 診断アプリの拡張

```
現在稼働中:
・VAK診断
・コミュニケーションスタイル診断

開発中:
・ワイン × VAK診断

今後追加予定:
・性格診断アプリ
・モチベーション診断アプリ
・コーチング適性診断アプリ
・複数診断の統合レポート機能

💡 すべて同じ無料プラットフォームで展開
   各アプリ間でデータ連携も可能
```

---

## 🌐 カスタムドメイン設定（詳細手順）

GitHub Pagesで独自ドメイン（例: `www.your-coaching-tools.com`）を使ってアプリを公開する方法を説明します。

### ステップ1: ドメインの取得

**ドメイン取得サービス（例）**
- お名前.com: https://www.onamae.com/
- ムームードメイン: https://muumuu-domain.com/
- Cloudflare Registrar: https://www.cloudflare.com/products/registrar/

希望するドメイン名を検索して購入します（年間1,000円〜2,000円程度）。

### ステップ2: DNSレコードの設定

ドメイン取得サービスの管理画面でDNS設定を行います。

**Apexドメイン（例: example.com）を使う場合**

以下の4つのAレコードを追加:

```
タイプ: A
ホスト: @（または空欄）
値:
  185.199.108.153
  185.199.109.153
  185.199.110.153
  185.199.111.153
```

**サブドメイン（例: www.example.com）を使う場合**

CNAMEレコードを追加:

```
タイプ: CNAME
ホスト: www
値: coaching-kit.github.io
```

**注意**: DNS設定の反映には数分〜24時間かかる場合があります。

### ステップ3: GitHub Pages設定

1. GitHubリポジトリ（coaching-kit/coaching-app）のページを開く
2. **Settings** > **Pages** に移動
3. **Custom domain** の欄に取得したドメイン（例: `www.example.com`）を入力
4. **Save** をクリック
5. 少し待つと、DNSチェックが完了し、**Enforce HTTPS** のチェックボックスが表示されます
6. **Enforce HTTPS** にチェックを入れる（HTTPS通信を強制）

### ステップ4: 動作確認

1. ブラウザで設定したドメイン（例: `https://www.example.com`）にアクセス
2. 診断アプリが表示されることを確認
3. アドレスバーに鍵マークが表示され、HTTPSが有効になっていることを確認

### トラブルシューティング

**404エラーが出る場合**
- DNS設定が正しいか確認（AレコードまたはCNAMEレコード）
- DNS反映まで待つ（最大24時間）
- GitHub PagesのCustom domain設定を再度確認

**HTTPSが有効にならない場合**
- DNS設定が完全に反映されるまで待つ
- Enforce HTTPSのチェックを一度外して、再度チェックを入れる

**DNSの確認コマンド（技術者向け）**

ターミナルで以下を実行:

```bash
# Aレコードの確認
dig +short example.com

# CNAMEレコードの確認
dig +short www.example.com
```

### 参考リンク

- **GitHub Pages公式ドキュメント（カスタムドメイン）**: https://docs.github.com/ja/pages/configuring-a-custom-domain-for-your-github-pages-site
- **GitHub Pages - カスタムドメインについて**: https://docs.github.com/ja/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages
- **お名前.com - DNS設定方法**: https://help.onamae.com/

---

**作成日**: 2026年1月18日  
**最終更新**: 2026年1月18日  
**バージョン**: 1.1  
**作成者**: Coaching App Development Team
